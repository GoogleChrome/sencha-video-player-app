Ext.data.JsonP.getting_started({"title":"Getting Started","guide":"<h1>Getting Started</h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ol>\n<li><a href='#!/guide/getting_started-section-1'>1. Requirements</a></li>\n<li><a href='#!/guide/getting_started-section-2'>2. Application Structure</a></li>\n</ol>\n</div>\n\n<h2 id='getting_started-section-1'>1. Requirements</h2>\n\n<h3>1.1 Chrome Platform</h3>\n\n<p>Chrome Platform Apps are native applications written in HTML5, JavaScript and CSS. These applications are integrated into the userâ€™s operating environment providing access to APIs and services not available to traditional web apps including Networking APIs, USB and Serial port access, and integrated user identity.</p>\n\n<p>This tutorial assumes you have the Chrome Platform Apps already enabled and ready to use.</p>\n\n<p>To read more on getting started we recommend you to visit <a href=\"http://developer.chrome.com/trunk/apps/about_apps.html\">Google Chrome Apps developer site</a></p>\n\n<h3>1.2. Ext JS 4 SDK</h3>\n\n<p>Download <a href=\"http://www.sencha.com/products/extjs/\">Ext JS 4 SDK</a>. Unzip the package to a new directory called \"sdk\" within your application root directory.</p>\n\n<h2 id='getting_started-section-2'>2. Application Structure</h2>\n\n<h3>2.1 Basic Structure</h3>\n\n<p>Although not mandatory, all suggestions listed below should be considered as best-practice guidelines to keep your application well organized, extensible and maintainable.\nThe following is the recommended directory structure for an Ext JS application:</p>\n\n<pre><code>- appname\n    - app\n        - namespace\n            - Class1.js\n            - Class2.js\n            - ...\n    - sdk\n    - resources\n        - css\n        - images\n        - ...\n    - app.js\n    - index.html\n    - background.js\n    - index.js\n    - manifest.json\n    - sandbox.html\n</code></pre>\n\n<ul>\n<li><code>appname</code> is a directory that contains all your application's source files</li>\n<li><code>app</code> contains all your classes, the naming style of which should follow the convention listed in the <a href=\"http://docs.sencha.com/ext-js/4-1/#!/guide/class_system\">Class System</a> guide</li>\n<li><code>sdk</code> contains the Ext JS 4 SDK files</li>\n<li><code>resources</code> contains additional CSS and image files which are responsible for the look and feel of the application, as well as other static resources (XML, JSON, etc.)</li>\n<li><code>index.html</code> is the entry-point HTML document</li>\n<li><code>app.js</code> contains your application's logic</li>\n<li><code>background.js</code> called by Chrome Platform to start your application</li>\n<li><code>index.js</code> creates the sandbox iframe for Ext JS to run (read more below)</li>\n<li><code>manifest.json</code> describe your application as part of Chrome Platform</li>\n<li><code>sandbox.html</code> sandboxed iframe entry point of your application</li>\n</ul>\n\n\n<h3>2.2 Content Security Policy</h3>\n\n<p>Chrome Platform Apps run in a controlled environment that enforces compliance with Content Security Policy.\nDeveloper should be aware, that there are some functions and methods either disabled, or not available. To name a few : alert(), localStorage and Flash.\nHere is the full list of <a href=\"http://developer.chrome.com/trunk/apps/app_deprecated.html\">Disabled Web Features</a></p>\n\n<p>Since Ext JS need some higher privileges to execute, the solution found is to create an iframe that acts as a sandbox environment. This iframe has no access to native APIs, so we have the following architecture:</p>\n\n<ul>\n<li><code>index.js</code> is the Chrome Platform app entry point. It creates the iframe which contains the Ext application and has access to native APIs.</li>\n<li><code>app.js</code> is the Ext JS app entry point. It can execute all the Ext code and render the views, but has no access to native APIs.</li>\n</ul>\n\n\n<p>So the parent page needs the iframe to render Ext JS components, and the iframe needs the parent page to have access to native APIs. They both comunicate using the\nHTML5 Post Message API.</p>\n\n<h3>2.3 Chrome App entry point</h3>\n\n<p>First of all you need to setup the manifest.json and background.js. These two files are mandatory for chrome applications.\nIf you would rather create just an extension, please have a look at the documentation provided on <a href=\"http://developer.chrome.com/extensions/\">Getting started with chrome extensions</a>.</p>\n\n<p>In your index.html, define the sandbox iframe as follow:</p>\n\n<pre><code>&lt;iframe id=\"sandbox-frame\" class=\"sandboxed\" sandbox=\"allow-scripts\" src=\"sandbox.html\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>Iframe points to sandbox.html file where we set up files requred for your ExtJs application and frame communication.\nSample file would contain:</p>\n\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"resources/css/app.css\" /&gt;'\n    &lt;script src=\"sdk/ext-all-dev.js\"&gt;&lt;/script&gt;'\n    &lt;script src=\"lib/ext/data/PostMessage.js\"&gt;&lt;/script&gt;'\n    &lt;script src=\"lib/ChromeProxy.js\"&gt;&lt;/script&gt;'\n    &lt;script src=\"app.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And on index.js, we get reference to this iframe for communication between frames:</p>\n\n<pre><code>var iframe = document.getElementById('sandbox-frame');\n\niframeWindow = iframe.contentWindow;\n</code></pre>\n\n<p>With this you'll have the start point for your Ext Application. You can check <a href=\"http://docs.sencha.com/ext-js/4-1/#!/guide\">additional Ext JS guides</a> on how to create your\nfirst views, controllers and models.</p>\n\n<h3>3 Native APIs</h3>\n\n<p>In order to Ext JS app gain access to native APIs, like query the network with UPNP for media servers, it needs to communicate the parent page. This is done by Post Message, and Ext\nhas a proxy for that.</p>\n\n<pre><code>Ext.data.PostMessage.request({\n    key: 'extension-baseurl',\n    success: function(data) {\n        //...\n    }\n});\n</code></pre>\n\n<p>This will send a message to the parent page with the key 'extension-baseurl'. The parent page now should listen for this message and reply back:</p>\n\n<pre><code>window.addEventListener('message', function(e) {\n    var data= e.data,\n        key = data.key;\n\n    console.log('[index.js] Post Message received with key ' + key);\n\n    switch (key) {\n        case 'extension-baseurl':\n            extensionBaseUrl(data);\n            break;\n\n        case 'upnp-discover':\n            upnpDiscover(data);\n            break;\n\n        case 'upnp-browse':\n            upnpBrowse(data);\n            break;\n\n        case 'play-media':\n            playMedia(data);\n            break;\n\n        case 'download-media':\n            downloadMedia(data);\n            break;\n\n        case 'cancel-download':\n            cancelDownload(data);\n            break;\n\n        default:\n            console.log('[index.js] unidentified key for Post Message: \"' + key + '\"');\n    }\n}, false);\n\nfunction extensionBaseUrl(data) {\n    data.result = chrome.extension.getURL('/');\n    iframeWindow.postMessage(data, '*');\n}\n</code></pre>\n\n<p>At the example above the Ext app requests the base chrome URL. The parent page receives the request, assigns the result, and sends the data back.</p>\n"});